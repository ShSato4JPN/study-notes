# ElasticCache について

ElastiCacheは、Amazon Web Services（AWS）が提供するフルマネージド型インメモリキャッシュサービス。

Webアプリケーションのパフォーマンスを向上させ、データベースへの負荷を軽減するために、高速なインメモリキャッシュとして利用される。

## ◾️ ElastiCache のタイプ

ElastiCacheには、主に以下の2つのタイプがある。

- **Redis**: オープンソースのインメモリデータストアで、データ構造サーバー。高速な読み書きが可能で、データの永続化や複雑なデータ構造のサポートが特徴。
- **Memcached**: シンプルなインメモリキャッシュで、キーと値のペアを保存する。高速なキャッシュ機能を提供し、スケーラビリティに優れている。

##  ◾️ ElastiCache の用途

ElastiCacheは、以下のような用途で利用される。

- **データベースのキャッシュ**: データベースクエリの結果をキャッシュし、データベースへのアクセスを減らす。
- **セッションストア**: ユーザーセッション情報をキャッシュし、アプリケーションのスケーラビリティを向上させる。
- **リアルタイム分析**: リアルタイムデータの分析や集計を高速化するために使用される。
- **メッセージブローカー**: 分散システム間のメッセージングを効率化するために利用される。
- **ランキングやカウントの管理**: リアルタイムでのランキングやカウントの更新を高速化する。
- **APIレスポンスのキャッシュ**: APIのレスポンスをキャッシュし、同じリクエストに対する応答時間を短縮する。
- **機械学習モデルのキャッシュ**: 機械学習モデルの推論結果をキャッシュし、再利用性を向上させる。

## ◾️ ElasticCache と CloudFront の違い

| 項目    | **Elasticache**                   | **CloudFront**            |
| ----- | --------------------------------- | ------------------------- |
| 役割    | データベースのキャッシュ（データ処理を早く）            | Webコンテンツの配信を早く            |
| 主な対象  | アプリケーション内部のデータ（DBクエリなど）           | 静的ファイル・画像・動画・HTML など      |
| 使い方   | DBの応答を高速化（例：Redis を使ってよく使うデータを保存） | ユーザーに近い場所からWebページを配信（CDN） |
| 例えるなら | 「料理の下ごしらえ済みの冷蔵庫」                  | 「全国にある出前の拠点」              |

## ◾️ リクエスの流れ

![参考画像](https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zmPnOWPa5Bu7Zh7jg5Sh6A.png)

1. ユーザーがリクエストを送信
　→ 例：「商品一覧を見せてください」などの要求が Application Server に送られます。

2. アプリケーションが ElastiCache（キャッシュ）を確認
　→ 過去に同じリクエストがあった場合、キャッシュにデータが残っているか確認します。

3. キャッシュにデータがなければ、RDS に問い合わせ（ミス：キャッシュミス）
　→ 「キャッシュにデータないから、DB に聞いてみよう」という動きです。

4. RDS（リレーショナルデータベース）からデータ取得
　→ 本物のデータベースから、必要な情報を取得します。

5. 取得したデータをアプリケーションに返す
　→ データベースから戻ってきた情報が Application Server に返されます。

6. そのデータを ElastiCache に保存（キャッシュに追加）
　→ 次に同じリクエストが来たとき、DB に行かなくて済むように、データをキャッシュに記憶します。

7. ユーザーにレスポンスを返す
　→ 最終的に、ユーザーに画面やデータが返されます。
