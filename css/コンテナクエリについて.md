# コンテナクエリについて

コンテナクエリは従来のViewportベースのメディアクエリとは異なり、**要素のコンテナサイズに基づいてスタイルを適用**する新しいCSS機能。これにより、より柔軟で再利用可能なコンポーネント設計が可能になる。

## ✅ `container-type` のキーワード値

| 値              | 意味                     | よく使うか？        | 用途・補足                          |
| -------------- | ---------------------- | ------------- | ------------------------------ |
| `normal`       | デフォルト。コンテナとして扱われない     | ❌ 使わない        | クエリは効かない。container の無効状態       |
| `inline-size`  | 横幅（inline 軸）のみでクエリを発火  | ✅ よく使う！       | 一般的なレイアウト対応に最適（例：カードやUI部品）     |
| `size`         | 横幅 + 高さ（両方）を考慮してクエリを発火 | △ 特定ケースで      | 2次元的にレイアウトを調整したいとき（例：正方形内での変化） |
| `scroll-state` | スクロール状態に応じて切り替えられる     | ❗実験的／あまり使われない | スクロール状態を条件にする特殊用途（対応ブラウザが少ない）  |

---

## ✅ `container-type` に複数値を指定（空白区切り）

```css
.container {
  container-type: size scroll-state;
}
```

これは「**サイズとスクロール状態の両方で Container Query を有効にする**」という意味。
ただし、**`scroll-state` は現在広くサポートされておらず、ほとんどのケースでは `inline-size` または `size` のみで十分です。**

---

## ✅ グローバル値（CSS 共通）

これらは `container-type` に限らず、**すべての CSS プロパティで使える共通の値**です：

| 値              | 説明                                          | 使いどころ              |
| -------------- | ------------------------------------------- | ------------------ |
| `inherit`      | 親要素の `container-type` を継承                   | 特定の継承制御が必要な場合      |
| `initial`      | デフォルト値（`normal`）にリセット                       | 意図的に初期化したいとき       |
| `unset`        | 継承されるプロパティなら `inherit`、されないなら `initial` に相当 | 柔軟な初期化             |
| `revert`       | ブラウザやユーザーエージェントスタイルシートの初期状態に戻す              | リセット処理向き           |
| `revert-layer` | cascade layer の影響をリセット（CSS Cascade 4）       | 高度なスタイル制御に使う（通常不要） |

---

## ✅ 実務での使い分けまとめ（簡易チャート）

| 目的                      | 使用する値                               |
| ----------------------- | ----------------------------------- |
| 一般的な「横幅」に応じたスタイル切替      | `inline-size` ✅ 一番よく使う              |
| 横×縦 両方に基づいて調整したい        | `size`                              |
| スクロール状態でスタイル変更したい（高度）   | `scroll-state`（試験的）                 |
| Container Query を無効にしたい | `normal`                            |
| 特定の継承や初期化をしたい           | `inherit`, `initial`, `unset`, etc. |

---

## ✅ Tailwind CSS での対応状況（2025年時点）

Tailwind v3.3 では以下のようにユーティリティ化可能：

```html
<div class="container-type-inline">...</div>
<div class="container-type-size">...</div>
```

ただし、`scroll-state` や `inherit` などの細かい指定は、**カスタムクラスや `@layer` を使って拡張**する必要があります。

---

## 💡補足：最も実用的な選択肢は？

* 95%のケースで：`container-type: inline-size;`
* 高度 or 特殊なユースケース：`size`, `scroll-state`
* リセットや上書き制御：`initial`, `unset` など

---

必要であれば、それぞれの値を使った実例コード（HTML＋CSSまたはTailwind）もご提供できます！
